<aiml version="2.0"><category><pattern>SELL</pattern> <template><clean opts="s">I give <getsb name="givestring" map="default"/> in exchange for <getsb name="takestring" map="default"/> . </clean></template> </category> <category><pattern>*</pattern> <template><clean opts="s"><randsbset set="greet"/> <srai>SELL</srai> </clean></template> </category> <category><pattern>SELL *</pattern> <template><srai>SELL</srai></template> </category> <category><pattern>RIGHTCLICK</pattern> <template><clean opts="s"><think><set name="t"><getpl name="itemheld"/></set></think> <condition name="t"><li value="AIR"><randsbset set="noitem"/></li> <li><value><uppercase><getsb name="exchange" map="default"/></uppercase></value> <condition name="curbuyitem"><li value="unknown">But what would you like to buy? <think><set name="topic">setbuy</set></think> </li> <li><think><set name="t"><take><item><uppercase><getsb name="exchange" map="default"/></uppercase></item> <count><getsb map="give"><name><lowercase><getpl name="curbuyitem"/></lowercase></name> </getsb></count> </take></set></think> <condition name="t"><li value="notenough"><randsbset set="notenough"/></li> <li value="yes"><think><give><item><uppercase><getpl name="curbuyitem"/></uppercase></item> <count>1</count> </give></think> <randsbset set="thanks"/> </li> <li value="wrong"><randsbset set="wrong"/></li> <li>WTF? Something weird has happened</li> </condition> </li> </condition> </li> <li><think><set name="q"><getsb map="take"><name><lowercase><get name="t"/></lowercase></name> </getsb></set></think> <condition name="q"><li value="unknown">I can't buy that. I only buy <getsb name="takestring" map="default"/> . My exchange item is  <lowercase><getsb name="exchange" map="default"/></lowercase> by the way. </li> <li><think><set name="t"><take><item><lowercase><get name="t"/></lowercase></item> <count><get name="q"/></count> </take></set></think> <condition name="t"><li value="notenough"><randsbset set="notenough"/></li> <li value="yes"><think><give><item><uppercase><getsb name="exchange" map="default"/></uppercase></item> <count>1</count> </give></think> <randsbset set="thanks"/> </li> <li value="wrong"><randsbset set="wrong"/></li> <li>WTF? Something weird has happened</li> </condition> </li> </condition> </li> </condition> </clean></template> </category> <category><pattern>BUY *</pattern> <template><think><set name="thing"><lowercase><matname><star/></matname></lowercase></set></think> <think><set name="t"><getsb map="give"><name><get name="thing"/></name> </getsb></set></think> <condition name="t"><li value="unknown"><randsbset set="dontsell"/></li> <li><think><setpl name="curbuyitem"><get name="thing"/></setpl></think> OK, you're buying <get name="thing"/> and the cost is <get name="t"/> <getsb name="exchange" map="default"/> . When you've got enough, just say "Forget it" or "Buy something else." </li> </condition> </template> </category> <category><pattern>* BUY *</pattern> <template><srai>BUY <star index="2"/> </srai></template> </category> <topic name="setbuy"><category><pattern>*</pattern> <template><think><set name="topic">*</set></think> <srai>BUY <star/> </srai> </template> </category> </topic> <category><pattern>FORGET *</pattern> <template><think><setpl name="curbuyitem">unknown</setpl></think> <randsbset set="agreement"/> </template> </category> <category><pattern>BUY * ELSE</pattern> <template><srai>FORGET</srai></template> </category> </aiml>
